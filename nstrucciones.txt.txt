
INSTRUCCIONES PARA CREAR Y EJECUTAR EL BOT DE TELEGRAM (Telethon, main.py)

1) Requisitos
- Visual Studio Code: https://code.visualstudio.com/Download
- Cuenta de Telegram activa.
- Bot creado con @BotFather.
- API_ID y API_HASH de https://my.telegram.org/apps
- Python 3.10 o superior.
- pip actualizado:  python -m pip install --upgrade pip

2) Crear el bot y obtener credenciales
2.1 Bot token (BOT_TOKEN)
   - En Telegram, abre @BotFather -> /start -> /newbot -> sigue los pasos.
   - Copia el token que entrega. Formato: 1234567890:AA...

2.2 API_ID y API_HASH
   - Ve a https://my.telegram.org -> Log in.
   - Apps -> Create new application -> copy API ID y API HASH.

2.3 ADMIN_ID (tu user ID num√©rico)
   - En Telegram, escribe al bot @userinfobot o @RawDataBot y copia tu id num√©rico.
   - Ese ID ser√° el √∫nico con acceso al panel /admin.

3) Preparar el proyecto
3.1 Carpeta de trabajo
   - Crea una carpeta, por ejemplo:  C:\proyectos\telegram-bot   o   ~/telegram-bot
   - Guarda ah√≠ tu main.py con el c√≥digo provisto.
   - El propio script crear√° carpetas:  sessions/  y  data/

3.2 Instalar dependencias
   pip install telethon==1.36.0

4) Configurar main.py
   - Abre main.py con visual studio code y completa:
       API_ID = TU_API_ID   (entero)
       API_HASH = "TU_API_HASH"
       BOT_TOKEN = "TU_BOT_TOKEN"
       ADMIN_ID = TU_ID_NUMERICO   (entero)
   - Guarda los cambios.

5) Ejecutar
   Windows: (Shift + click derecho en un espacio en blanco y abrir ventana de powershell aqu√≠)
     Escribe py main.py y preciona enter
   - La primera vez se iniciar√° el bot y quedar√° ‚Äúescuchando‚Äù. No cierres la consola.
   - Ver√°s el mensaje: ‚ÄúBot iniciado y escuchando eventos.‚Äù

6) Uso b√°sico dentro de Telegram
6.1 Iniciar chat con el bot
   - Abre Telegram, busca tu bot por el @username que diste en BotFather.
   - Pulsa ‚ÄúStart‚Äù o env√≠a /start.
   - Si tu usuario no tiene acceso activo, ver√°s ‚ÄúNo tienes acceso...‚Äù. Solo el ADMIN_ID gestiona accesos.

6.2 Panel de administrador
   - Como ADMIN_ID, env√≠a /admin.
   - Botones disponibles:
       ‚ûï A√±adir usuario       -> Da acceso temporal a un usuario. Requiere su ID y tel√©fono.
       üóëÔ∏è Eliminar usuario     -> Revoca acceso y elimina su sesi√≥n.
       üìÖ Extender acceso      -> Suma meses a un usuario ya registrado.
       üì¢ Enviar anuncio       -> Env√≠a un mensaje a todos los usuarios con acceso vigente.
   - Sigue las indicaciones de cada flujo. El bot te pedir√° datos paso a paso.

6.3 Sesi√≥n de usuario para env√≠o a grupos
   - Cuando a√±ades un usuario, el bot solicita un c√≥digo de confirmaci√≥n al tel√©fono indicado.
   - Tras verificar el c√≥digo, se crea una sesi√≥n en /sessions/<ID>.session
   - El propio usuario autorizado usa /start para abrir el men√∫:
       ‚Ä¢ Enviar mensaje ahora
       ‚Ä¢ Programar env√≠os
       ‚Ä¢ Detener env√≠os programados
       ‚Ä¢ Blacklist de grupos
   - ‚ÄúSaved Messages‚Äù del usuario sirve como fuente. El usuario elige qu√© mensaje reenviar.

6.4 Blacklist de grupos
   - Permite marcar grupos o canales para excluirlos de futuros env√≠os.
   - Navega por p√°ginas y alterna estados con los botones.

6.5 /sub
   - Muestra al usuario su n√∫mero asociado, tiempo restante y fecha de expiraci√≥n del acceso.

7) Archivos y datos
- data/users.json        -> Usuarios con acceso, tel√©fono y timestamp de expiraci√≥n.
- data/blacklist.json    -> IDs de grupos/canales excluidos.
- sessions/*.session     -> Sesiones de Telethon por usuario.
- No compartas estos archivos. Contienen datos sensibles.

8) Errores comunes y soluci√≥n
- FloodWaitError / PeerFloodError:
  Ocurre por l√≠mites de Telegram. Reduce la frecuencia, respeta pausas y evita abusos.
- UserIsBlockedError:
  El bot o la cuenta no puede enviar al destino. Revisa permisos del grupo/canal.
- ‚ÄúTu sesi√≥n no se encontr√≥‚Äù al /start:
  Aseg√∫rate de que existe sessions/<ID>.session y que la sesi√≥n est√° autorizada.
- ImportError: telethon no encontrado:
  Reinstala dependencias en el entorno activo:  pip install telethon==1.36.0

9) Buenas pr√°cticas y cumplimiento
- Usa el sistema solo con consentimiento y en grupos donde tengas permisos.
- Respeta las Condiciones de Telegram y la legislaci√≥n anti‚Äëspam local.
- Limita la frecuencia de env√≠os y ofrece mecanismos de exclusi√≥n.
- Protege tokens, API keys y archivos .session. No los subas a repos p√∫blicos.

10) Detener el bot
- Presiona Ctrl+C en la consola para cerrar.
- Al reiniciar, las sesiones v√°lidas se recargar√°n autom√°ticamente.
